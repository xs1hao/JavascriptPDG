<!doctype html>
<html>
<head>
    <title>Event Target Example</title>
    <script type="text/javascript" src="EventTarget.js"></script>
</head>
<body>
    <div id="myDiv" style="background:red;"></div>

    <script type="text/javascript">
        
        function handleMessage(event){
            console.log("Message received: " + event.message);
        }

        // 创建一个新对象；
        var target = new EventTarget();
        
        // 添加一个事件处理程序；
        target.addHandler("message", handleMessage);
        // target 是一个 EventTarget 对象 EventTarget {handlers: {…}}
        /**
         * handles {
         *      message: [handleMessage()]
         * }
         *
         * **/


        // 触发事件
        target.fire({ type: "message", message: "Hello world!"});
        
        // 删除事件处理程序
        target.removeHandler("message", handleMessage);

        // 再次触发，没有事件处理；
        target.fire({ type: "message", message: "Hello world!"});


    </script>
</body>
</html>
